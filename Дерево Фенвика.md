# üå≥ –î–µ—Ä–µ–≤–æ –§–µ–Ω–≤–∏–∫–∞ (Fenwick Tree, BIT)

## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ –¥–µ—Ä–µ–≤–æ –§–µ–Ω–≤–∏–∫–∞?

**–î–µ—Ä–µ–≤–æ –§–µ–Ω–≤–∏–∫–∞** (–∏–ª–∏ **Binary Indexed Tree**, BIT) ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:
- **–°—É–º–º—ã –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ** (prefix sum)
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤** (point update)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–µ—Ä–µ–≤–∞ –§–µ–Ω–≤–∏–∫–∞:**
- **O(log N)** –Ω–∞ –∑–∞–ø—Ä–æ—Å —Å—É–º–º—ã.
- **O(log N)** –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **O(N)** –ø–∞–º—è—Ç–∏.

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –§–µ–Ω–≤–∏–∫–∞

```cpp
class FenwickTree {
public:
    vector<int> bit;
    int n;

    FenwickTree(int size) {
        n = size;
        bit.assign(n + 1, 0);
    }

    void update(int idx, int delta) {
        while (idx <= n) {
            bit[idx] += delta;
            idx += idx & -idx;
        }
    }

    int sum(int idx) {
        int res = 0;
        while (idx > 0) {
            res += bit[idx];
            idx -= idx & -idx;
        }
        return res;
    }

    int rangeSum(int l, int r) {
        return sum(r) - sum(l - 1);
    }
};
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
```cpp
FenwickTree ft(10);
ft.update(3, 5); // –î–æ–±–∞–≤–∏—Ç—å 5 –∫ arr[3]
cout << ft.rangeSum(1, 3) << endl; // –°—É–º–º–∞ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [1,3]
```

---

## üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1Ô∏è‚É£ –î–≤–æ–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –¥–µ—Ä–µ–≤—É –§–µ–Ω–≤–∏–∫–∞
–ú–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ **–ø–µ—Ä–≤—ã–π –∏–Ω–¥–µ–∫—Å**, —Å—É–º–º–∞ –≤ –¥–µ—Ä–µ–≤–µ –¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ `k`.

```cpp
int findKth(FenwickTree &ft, int k) {
    int sum = 0, pos = 0;
    for (int i = log2(ft.n); i >= 0; i--) {
        int nextPos = pos + (1 << i);
        if (nextPos <= ft.n && sum + ft.bit[nextPos] < k) {
            sum += ft.bit[nextPos];
            pos = nextPos;
        }
    }
    return pos + 1;
}
```

### 2Ô∏è‚É£ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (Range Update)

–û–±—ã—á–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –§–µ–Ω–≤–∏–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏**, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É **–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ**:

```cpp
class FenwickTreeRange {
public:
    vector<int> bit1, bit2;
    int n;
    FenwickTreeRange(int size) {
        n = size;
        bit1.assign(n + 1, 0);
        bit2.assign(n + 1, 0);
    }

    void update(vector<int>& bit, int idx, int delta) {
        while (idx <= n) {
            bit[idx] += delta;
            idx += idx & -idx;
        }
    }

    void rangeUpdate(int l, int r, int delta) {
        update(bit1, l, delta);
        update(bit1, r + 1, -delta);
        update(bit2, l, delta * (l - 1));
        update(bit2, r + 1, -delta * r);
    }

    int sum(vector<int>& bit, int idx) {
        int res = 0;
        while (idx > 0) {
            res += bit[idx];
            idx -= idx & -idx;
        }
        return res;
    }

    int prefixSum(int idx) {
        return sum(bit1, idx) * idx - sum(bit2, idx);
    }

    int rangeSum(int l, int r) {
        return prefixSum(r) - prefixSum(l - 1);
    }
};
```

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:
```cpp
FenwickTreeRange ftr(10);
ftr.rangeUpdate(2, 5, 3); // –î–æ–±–∞–≤–∏—Ç—å 3 –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [2,5]
cout << ftr.rangeSum(1, 5) << endl; // –°—É–º–º–∞ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ [1,5]
```

---

## üîπ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ –§–µ–Ω–≤–∏–∫–∞
- **–°—É–º–º–∞ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞**.
- **–ö-–∞—è –ø–æ—Ä—è–¥–∫–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (binary search –ø–æ BIT)**.
- **–ß–∞—Å—Ç–æ—Ç–Ω—ã–π –º–∞—Å—Å–∏–≤ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–∞—Å—Ç–æ—Ç –≤ –æ–Ω–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ)**.
- **–î–≤—É–º–µ—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏ (2D Fenwick Tree)**.
